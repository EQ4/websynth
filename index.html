<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Csound virtual instrument</title>
    <link rel="stylesheet" href="normalize.css/normalize.css">
    <link rel="stylesheet" href="main.css">
    <script src="csound.js"></script>
    <script>
        function moduleDidLoad() {
            csound.Play();
            csound.CompileOrc(
                "gihrm ftgen 0, 0, 16384, 10, 1\n" +

                "instr 1\n" +
                "kenv mxadsr 0.01, 0.2, 0.5, 1.5, 0, 3\n" +
                "asig gbuzz kenv*p5/8, cpsmidinn(p4), 8, 1, 0.75*p5^sqrt(2), gihrm\n" +
                "     outs asig, asig\n" +
                "endin\n"
            );
        };

        function handleMessage(message) {
            document.getElementById("console").innerText += message.data;
        }
    </script>
</head>
<body>
    <h1>Csound virtual instrument</h1>
    Console:
    <div id="console"></div>
    <br>
    <div class="keys">
        <div class="key" onmousedown="csound.Event('i 1.60 0 -1 60 0.75')" onmouseup="csound.Event('i -1.60 0 0')">C4</div>
        <div class="key" onmousedown="csound.Event('i 1.64 0 -1 64 0.75')" onmouseup="csound.Event('i -1.64 0 0')">E4</div>
        <div class="key" onmousedown="csound.Event('i 1.67 0 -1 67 0.75')" onmouseup="csound.Event('i -1.67 0 0')">G4</div>
        <div class="key" onmousedown="csound.Event('i 1.72 0 -1 72 0.75')" onmouseup="csound.Event('i -1.72 0 0')">C5</div>
    </div>
    <div id="engine"></div>
</body>
</html>
